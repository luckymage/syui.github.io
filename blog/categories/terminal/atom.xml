<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: terminal | MBA-HACK2]]></title>
  <link href="http://syui.github.io/blog/categories/terminal/atom.xml" rel="self"/>
  <link href="http://syui.github.io/"/>
  <updated>2014-07-02T05:32:30+09:00</updated>
  <id>http://syui.github.io/</id>
  <author>
    <name><![CDATA[syui]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ImageMagickでFaviconを作成する方法]]></title>
    <link href="http://syui.github.io/blog/2014/06/29/imagemagick-favicon-make/"/>
    <updated>2014-06-29T00:00:00+09:00</updated>
    <id>http://syui.github.io/blog/2014/06/29/imagemagick-favicon-make</id>
    <content type="html"><![CDATA[<p><img src="/images/more.png" alt="phoenix-power" align="left" width="100" height="100">検索で変換サイトを使うよりも確実です。<!--more--><br clear="all"></p>

<h4>マルチアイコンの作成</h4>

<p>256、192、128、96、64、48、40、32、24、16のサイズでマルチアイコンを作ります。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>convert icon.png -define icon:auto-resize favicon.ico
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>ファビコンの指定</h4>

<p>ファビコンを指定するのは、<code>head</code>内に以下のタグを使います。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;link <span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;icon&quot;</span> <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://syui.github.io/favicon.ico&quot;</span> /&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>サイズの確認です。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>identify favicon.ico
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>このブログのファビコンも変更してみました。ただし、モバイルと分けているので、ブラウザによってどちらが表示されるか分かりませんが。</p>

<p><img src="http://lh5.ggpht.com/-DJRj3P2UvNs/U6_VJzEWzVI/AAAAAAAAIeI/GLqChzhexww/phoenix-logo-black-new.png"></p>

<h4>iOS や Android 対応の ico ファイル作成する方法</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>convert -resize 152x152 icon.png favicon.png
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;link <span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;apple-touch-icon-precomposed&quot;</span> <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;path/to/favicon.png&quot;</span>&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>参考:</p>

<p><a href="http://www.regentechlog.com/2014/04/03/imagemagick-multisize-ico/" target="_blank">ImageMagickでマルチアイコンを簡単に作る</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[zshのzawを使ったディレクトリ移動とファイルの実行]]></title>
    <link href="http://syui.github.io/blog/2014/06/25/zsh-zaw-cdr/"/>
    <updated>2014-06-25T00:00:00+09:00</updated>
    <id>http://syui.github.io/blog/2014/06/25/zsh-zaw-cdr</id>
    <content type="html"><![CDATA[<p><img src="/images/more.png" alt="phoenix-power" align="left" width="100" height="100">zsh に追加された cdr を使います。<!--more--><br clear="all"></p>

<p>私の場合は、<code>z hoge&lt;Tab&gt;</code>または、<code>Ctrl+jj</code>でディレクトリ移動をしています。前者は<a href="https://github.com/rupa/z">z</a>を使います。後者は<a href="https://github.com/zsh-users/zaw">zaw</a>です。</p>

<p>あと、ファイルを開く動作は、<code>Ctrl+o</code>、<code>Ctrl+oo</code>です。前者は<code>Application</code>を検索します。後者は<code>vim</code>で開きます。</p>

<p>ちなみに、プロンプトに何のコマンドが実行されたのかの表示を残したい場合は、<code>bindkey -s{v, e}</code>を使いましょう。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.zshrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;z <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;brew install z&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;. &lt;code&gt;brew --prefix&lt;/code&gt;/etc/profile.d/z.sh
</span><span class='line'>compctl -U -K &lt;em&gt;z_zsh_tab_completion <span class="k">${</span><span class="p">&lt;/em&gt;Z_CMD</span><span class="k">:-</span><span class="nv">z</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;cdr <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;autoload -Uz chpwd_recent_dirs cdr add-zsh-hook
</span><span class='line'>zstyle &amp;lsquo;:completion:&lt;em&gt;:&lt;/em&gt;:cdr:&lt;em&gt;:&lt;/em&gt;&amp;rsquo; menu selection
</span><span class='line'>zstyle &amp;lsquo;:completion:&lt;em&gt;&amp;rsquo; recent-dirs-insert both
</span><span class='line'>zstyle &amp;lsquo;:chpwd:&lt;/em&gt;&amp;rsquo; recent-dirs-max 500
</span><span class='line'>zstyle &amp;lsquo;:chpwd:&lt;em&gt;&amp;rsquo; recent-dirs-default <span class="nb">true</span>
</span><span class='line'>zstyle &amp;lsquo;:chpwd:&lt;/em&gt;&amp;rsquo; recent-dirs-pushd <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;zaw-cdr&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/zsh-users/zaw&quot;</span>&gt;https://github.com/zsh-users/zaw&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;source /path/to/zaw.zsh&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey &amp;lsquo;^j&lt;sup&gt;j&lt;/sup&gt;&amp;rsquo; zaw-cdr&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;percol-open-vim&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/mooz/percol&quot;</span>&gt;https://github.com/mooz/percol&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sudo python setup.py install&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -sv &amp;lsquo;^o&lt;sup&gt;o&lt;/sup&gt;&amp;rsquo; &amp;lsquo;vim <span class="k">$(</span>ls | percol<span class="k">)</span><span class="se">\n</span>&amp;rsquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;mac-open-application <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;case &amp;ldquo;<span class="k">${</span><span class="nv">OSTYPE</span><span class="k">}</span>&amp;rdquo; in&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;MacOSX&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;darwin*<span class="o">)</span>
</span><span class='line'>  <span class="k">function </span>openapp<span class="o">()</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;BUFFER<span class="o">=</span><span class="s2">&quot;open -a &quot;</span>
</span><span class='line'><span class="nv">CURSOR</span><span class="o">=</span><span class="nv">$#BUFFER</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="o">}</span>
</span><span class='line'>  zle -N openapp
</span><span class='line'>  bindkey &amp;lsquo;^o&amp;rsquo; openapp
</span><span class='line'>;;
</span><span class='line'><span class="k">esac</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;open-commmand <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;case &amp;ldquo;<span class="k">${</span><span class="nv">OSTYPE</span><span class="k">}</span>&amp;rdquo; in
</span><span class='line'>freebsd&lt;em&gt;|darwin&lt;/em&gt;<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;alias <span class="nv">o</span><span class="o">=</span><span class="s2">&quot;open&quot;</span>
</span><span class='line'>;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;linux*<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;alias <span class="nv">open</span><span class="o">=</span><span class="s2">&quot;xdg-open&quot;</span>
</span><span class='line'><span class="c">#alias open=&quot;gnome-open&quot;</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cygwin*<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;alias <span class="nv">open</span><span class="o">=</span><span class="s2">&quot;cygstart&quot;</span>
</span><span class='line'>;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;esac&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>こんな感じで、<a href="https://github.com/mooz/percol">percol</a>を使うことも多いのですが、<a href="https://github.com/zsh-users/zaw">zaw</a>も使います。</p>

<p>印象ですが、<code>percol</code>はシンプルな設計で、非常に組み込みやすいため、自作ツールのインターフェイスとして利用する場面が多く、<code>zaw</code>は、普段使いと言った感じで利用する場面が多いです。</p>

<p>ちなみに、 zaw で z の history を使用したい場合は、以下のプラグインを使いましょう。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/zaw/source&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span>curl -O &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://raw.githubusercontent.com/lovingly/dotfiles/master/zsh.d/zaw/zaw-z.zsh&quot;</span>&gt;https://raw.githubusercontent.com/lovingly/dotfiles/master/zsh.d/zaw/zaw-z.zsh&lt;/a&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span><span class="nb">echo</span> &amp;ldquo;bindkey &amp;lsquo;^f&lt;sup&gt;f&lt;/sup&gt;&amp;rsquo; zaw-z&amp;rdquo; &gt;&gt; ~/.zshrc
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[airindent.vim]]></title>
    <link href="http://syui.github.io/blog/2014/06/19/airindent-dot-vim/"/>
    <updated>2014-06-19T00:00:00+09:00</updated>
    <id>http://syui.github.io/blog/2014/06/19/airindent-dot-vim</id>
    <content type="html"><![CDATA[<p><img src="/images/more.png" alt="phoenix-power" align="left" width="100" height="100">ブログに載せてるコードからも分かるように、インデントはあまりしっかりしてないので、自動化してみました。<!--more--><br clear="all"></p>

<h2>airindent.vim</h2>

<p><div class="github-widget" data-repo="syui/airindent.vim"></div></p>

<p>このプラグインは、テキスト変更時にインデントを形成します。</p>

<p>仕組みは簡単で、<code>=G</code>や<code>gg=G</code>を使います。</p>

<p>しかし、<code>gg=G</code>の場合は、文頭にカーソル移動してしまいます。</p>

<p>したがって、変換する前の行に再度移動するようにしています。</p>

<h3>install</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.vimrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'>NeoBundle &amp;ldquo;syui/airindent.<span class="k">vim</span>&amp;rdquo;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>:NeoBundleInstall</code></p>

<h3>command</h3>

<table>
<thead>
<tr>
<th></th>
<th>コマンド</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>:AirIndentMoveLine</td>
<td>すべての範囲をインデントして戻る</td>
</tr>
<tr>
<td></td>
<td>:AirAutoIndentAllStart</td>
<td>自動ですべての範囲をインデントを開始</td>
</tr>
<tr>
<td></td>
<td>:AirAutoIndentAllStop</td>
<td>自動インデントの停止</td>
</tr>
</tbody>
</table>


<h3>setting</h3>

<p>モードの設定があります。<code>1</code>で有効にします。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.vimrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'>&amp;ldquo; setting {{{
</span><span class='line'>&amp;rdquo; インデントの自動化を有効にする
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:air_auto_indent <span class="p">=</span> <span class="m">1</span>
</span><span class='line'>&amp;ldquo; 全範囲を対象にしたインデントのキーバインドを設定する
</span><span class='line'>nm <span class="p">&lt;</span>Leader<span class="p">&gt;</span>&amp;ndash; <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>AirIndentMoveLine<span class="p">)</span>
</span><span class='line'>&amp;rdquo; }}}
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>code</h3>

<h4>インデント後に直前の行に戻る</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.vim/bundle/airindent.vim/plugin/airindent.vim </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="k">fu</span><span class="p">!</span> <span class="k">s</span>:air_indent_move_line<span class="p">()</span>
</span><span class='line'>  &amp;ldquo;<span class="k">let</span> cline <span class="p">=</span> getline<span class="p">(</span><span class="k">v</span>:lnum<span class="p">)</span>
</span><span class='line'>  <span class="k">let</span> air_cmove <span class="p">=</span> line<span class="p">(</span>&amp;rdquo;.&amp;ldquo;<span class="p">)</span> . <span class="c">&quot;G&amp;rdquo;</span>
</span><span class='line'>  exe &amp;ldquo;:normal gg<span class="p">=</span>G&amp;rdquo;
</span><span class='line'>  exe &amp;ldquo;:normal &amp;rdquo; . air_cmove
</span><span class='line'><span class="k">endf</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>文字列として現在行とコマンドを保存します。</p>

<p>そして、保存したコマンド文字列を<code>exe</code>によって実行します。</p>

<h4>上のコマンドを自動化する</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.vim/bundle/airindent.vim/plugin/airindent.vim </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="k">fu</span><span class="p">!</span> <span class="k">s</span>:air_auto_indent_start<span class="p">()</span>
</span><span class='line'>  aug vimrc_air_indent<span class="p">&lt;</span>/<span class="k">p</span><span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="p">&lt;</span><span class="k">pre</span><span class="p">&gt;&lt;</span>code<span class="p">&gt;</span><span class="k">au</span><span class="p">!</span>
</span><span class='line'><span class="k">au</span> <span class="nb">BufReadPost</span><span class="p">,</span><span class="nb">BufUnload</span> * <span class="k">call</span> &amp;<span class="k">lt</span>;SID&amp;gt;air_indent_move_line<span class="p">()</span>
</span><span class='line'><span class="p">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="k">pre</span><span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="p">&lt;</span><span class="k">p</span><span class="p">&gt;</span>  aug END
</span><span class='line'><span class="k">endf</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>BufReadPost,BufUnload</code>によりバッファを開いた時、終了した時に全範囲のインデントを整え、直前の行に戻るコマンドを実行します。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[airchrome.zsh]]></title>
    <link href="http://syui.github.io/blog/2014/06/12/airchrome/"/>
    <updated>2014-06-12T00:00:00+09:00</updated>
    <id>http://syui.github.io/blog/2014/06/12/airchrome</id>
    <content type="html"><![CDATA[<p><img src="/images/more.png" alt="phoenix-power" align="left" width="100" height="100">airchrome.zshのコードを解説します。<!--more--><br clear="all"></p>

<p><a href="https://github.com/syui/airchrome.zsh">https://github.com/syui/airchrome.zsh</a></p>

<h2>README.md</h2>

<h3>features</h3>

<p>This article explains the features in <code>airchrome.zsh</code>.</p>

<p><code>airchrome.zsh</code> is operates on the Google Chrome from zsh.</p>

<p><code>airchrome.zsh</code> is will only support Mac, And some functions only support of iTerm terminal.</p>

<h3>japanese</h3>

<p>この記事は、<code>airchrome.zsh</code>の機能について解説します。</p>

<p><code>airchrome.zsh</code>は、 zsh から Google Chrome を操作します。</p>

<p><code>airchrome.zsh</code>は、 Mac のみに対応しています。そして、一部機能は、端末の iTerm を使用します。</p>

<h3>install</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/syui/airchrome.zsh&quot;</span>&gt;https://github.com/syui/airchrome.zsh&lt;/a&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span><span class="nb">cd</span> !<span class="nv">$:</span>t&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span>touch ~/.zshrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span><span class="nb">echo</span> &amp;ldquo;source <span class="nv">$PWD</span>/airchrome.zsh&amp;rdquo; &gt;&gt; ~/.zshrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span><span class="nb">source</span> ~/.zshrc
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>bindkey</h3>

<table>
<thead>
<tr>
<th></th>
<th> key </th>
<th> title</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>  ?  </td>
<td> ヘルプ</td>
</tr>
<tr>
<td></td>
<td>  ^e </td>
<td> emacs モードに切り替える</td>
</tr>
<tr>
<td></td>
<td>  ^v </td>
<td> vi モードに切り替える</td>
</tr>
<tr>
<td></td>
<td>  jj </td>
<td> vi の normal モードに切り替える</td>
</tr>
<tr>
<td></td>
<td>  i  </td>
<td> vi の insert モードに切り替える</td>
</tr>
<tr>
<td></td>
<td>  .  </td>
<td> percol のインターフェイスを使う</td>
</tr>
<tr>
<td></td>
<td>  f  </td>
<td> Chrome に f を送る</td>
</tr>
<tr>
<td></td>
<td>  b  </td>
<td> Chrome に特定のキーを送る</td>
</tr>
<tr>
<td></td>
<td>  n  </td>
<td> Chrome に入力を送る</td>
</tr>
<tr>
<td></td>
<td>  0  </td>
<td> ウィンドウを0.0で透過。iTermを使用します。</td>
</tr>
<tr>
<td></td>
<td>  1  </td>
<td> ウィンドウを0.4で透過。iTermを使用します。</td>
</tr>
<tr>
<td></td>
<td>  2  </td>
<td> ウィンドウを1.0で透過。iTermを使用します。</td>
</tr>
<tr>
<td></td>
<td>  j  </td>
<td> スクロール下</td>
</tr>
<tr>
<td></td>
<td>  k  </td>
<td> スクロール上</td>
</tr>
<tr>
<td></td>
<td>  h  </td>
<td> 次へ</td>
</tr>
<tr>
<td></td>
<td>  l  </td>
<td> 前へ</td>
</tr>
<tr>
<td></td>
<td>  w  </td>
<td> タブを閉じる</td>
</tr>
<tr>
<td></td>
<td>  t  </td>
<td> タブの切替</td>
</tr>
<tr>
<td></td>
<td>  o  </td>
<td> タブ</td>
</tr>
<tr>
<td></td>
<td>  r  </td>
<td> リロード</td>
</tr>
<tr>
<td></td>
<td>  p  </td>
<td> ペースト</td>
</tr>
<tr>
<td></td>
<td>  y  </td>
<td> コピー</td>
</tr>
<tr>
<td></td>
<td>  c  </td>
<td> 現在のページにコマンドをコピーします。</td>
</tr>
<tr>
<td></td>
<td>  yu </td>
<td> 現在のページの URL を取得します。</td>
</tr>
<tr>
<td></td>
<td>  yt </td>
<td> 現在のページのタイトルを取得します。</td>
</tr>
<tr>
<td></td>
<td>  yy </td>
<td> 現在のページの URL とタイトルをコピーします。</td>
</tr>
<tr>
<td></td>
<td>  yf </td>
<td> テキストをコピーします。</td>
</tr>
<tr>
<td></td>
<td>  ym </td>
<td> 現在のページの URL とタイトルを Markdown 形式で取得します。</td>
</tr>
<tr>
<td></td>
<td>  yh </td>
<td> 現在のページの URL とタイトルを HTML 形式で取得します。</td>
</tr>
<tr>
<td></td>
<td>  cc </td>
<td> ブログに掲載されているコマンドをコピーします。</td>
</tr>
<tr>
<td></td>
<td>  c; </td>
<td> ブログに掲載されているコマンドを複数行選択コピーします。各コマンドを ; でつなぎます。</td>
</tr>
<tr>
<td></td>
<td>  c@ </td>
<td> ブログに掲載されているコマンドを複数行選択コピーします。各コマンドを &amp;&amp; でつなぎます。</td>
</tr>
<tr>
<td></td>
<td>  af </td>
<td> Feedly で自動 RSS URL を開きます。</td>
</tr>
<tr>
<td></td>
<td>  au </td>
<td> Feedly で現在のURL を開きます。</td>
</tr>
<tr>
<td></td>
<td>  ak </td>
<td> airkeepass という外部ツールを開きます。</td>
</tr>
<tr>
<td></td>
<td>  ag </td>
<td> airgoogleplus という外部ツールを開きます。</td>
</tr>
<tr>
<td></td>
<td>  bb </td>
<td> ブックマークを開きます。 percol という外部ツールを使用します。</td>
</tr>
<tr>
<td></td>
<td>  bs </td>
<td> ブックマークのディレクトリ1を選択して、 Chrome で開きます。</td>
</tr>
</tbody>
</table>


<h2>code</h2>

<p><code>airchrome.zsh</code>のコードを解説します。</p>

<h3>airchrome.zsh</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>/path/to/airchrome.zsh </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;パスの取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;path <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;airchrome_dir<span class="o">=</span><span class="nv">$0</span>:h
</span><span class='line'><span class="nv">airchrome_script</span><span class="o">=</span><span class="nv">$airchrome_dir</span>/script&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;path <span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;デフォルトプロンプトの設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;prompt <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;現在のバインドモードを取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;EMACS_INSERT<span class="o">=</span>&lt;code&gt;bindkey -lL main | cut -d <span class="s1">&#39; &#39;</span> -f 3&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;現在のバインドモード<span class="o">(</span>文字列<span class="o">)</span>に装飾を施す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;EMACS_INSERT<span class="o">=</span>&amp;ldquo;%K<span class="o">{</span>black<span class="o">}</span>%F<span class="o">{</span>034<span class="o">}</span>⮂%k%f%K<span class="o">{</span>034<span class="o">}</span>%F<span class="o">{</span>011<span class="o">}</span> % <span class="nv">$EMACS_INSERT</span> %k%f&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;モードが vi の場合の装飾&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;VIM_INSERT<span class="o">=</span>&amp;ldquo;%K<span class="o">{</span>034<span class="o">}</span>%F<span class="o">{</span>075<span class="o">}</span>⮂%k%f%K<span class="o">{</span>075<span class="o">}</span>%F<span class="o">{</span>026<span class="o">}</span> % INSERT %k%f%K<span class="o">{</span>075<span class="o">}</span>%F<span class="o">{</span>black<span class="o">}</span>⮂%k%f&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;プロンプトの設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;RPROMPT<span class="o">=</span>&amp;ldquo;<span class="nv">$EMACS_INSERT$VIM_INSERT</span>&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;キーバインドが emacs モードだった場合のプロンプトの設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;function zle-keymap-select <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;EMACS_INSERT<span class="o">=</span><span class="sb">`</span>bindkey -lL main | cut -d <span class="s1">&#39; &#39;</span> -f 3<span class="sb">`</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$EMACS_INSERT</span> | grep emacs &amp;gt; /dev/null 2&amp;gt;&amp;amp;1;then
</span><span class='line'>    <span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{011}⮂%k%f%K{011}%F{034} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{034}⮂%k%f%K{034}%F{011} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="nv">RPROMPT</span><span class="o">=</span><span class="s2">&quot;$EMACS_INSERT${${KEYMAP/vicmd/$VIM_NORMAL}/(main|viins)/$VIM_INSERT}&quot;</span>
</span><span class='line'>zle reset-prompt
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>
</span><span class='line'>zle -N zle-keymap-select&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;prompt <span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;キーバインド emacs モードにした時のプロンプト&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;prompt-bindkey <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;function airchrome-bindmode-emacs <span class="o">()</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;# emacs モードへの切り替え
</span><span class='line'>bindkey -e
</span><span class='line'>
</span><span class='line'><span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="sb">`</span>bindkey -lL main | cut -d <span class="s1">&#39; &#39;</span> -f 3<span class="sb">`</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$EMACS_INSERT</span> | grep emacs &amp;gt; /dev/null 2&amp;gt;&amp;amp;1;then
</span><span class='line'>    <span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{011}⮂%k%f%K{011}%F{034} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{034}⮂%k%f%K{034}%F{011} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="nv">RPS1</span><span class="o">=</span><span class="s2">&quot;$EMACS_INSERT${${KEYMAP/vicmd/$VIM_NORMAL}/(main|viins)/$VIM_INSERT}&quot;</span>
</span><span class='line'><span class="nv">RPS2</span><span class="o">=</span><span class="nv">$RPS1</span>
</span><span class='line'>zle reset-prompt
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>
</span><span class='line'>zle -N airchrome-bindmode-emacs&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;vi モードで Ctrl+e を押すと、 emacs モードに切り替えと同時に、プロンプトが設定される&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -v &amp;lsquo;^e&amp;rsquo; airchrome-bindmode-emacs&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;vi の normal モードで Ctrl+e を押すと、 emacs モードに切り替わると同時に、プロンプトが設定される&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -a &amp;lsquo;^e&amp;rsquo; airchrome-bindmode-emacs&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;function airchrome-bindmode-vi <span class="o">()</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;bindkey -v
</span><span class='line'>
</span><span class='line'><span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="sb">`</span>bindkey -lL main | cut -d <span class="s1">&#39; &#39;</span> -f 3<span class="sb">`</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$EMACS_INSERT</span> | grep emacs &amp;gt; /dev/null 2&amp;gt;&amp;amp;1;then
</span><span class='line'>    <span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{011}⮂%k%f%K{011}%F{034} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{011}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nv">EMACS_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{black}%F{034}⮂%k%f%K{034}%F{011} % $EMACS_INSERT %k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_NORMAL</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{125}⮂%k%f%K{125}%F{015} % NORMAL %k%f%K{125}%F{black}⮂%k%f&quot;</span>
</span><span class='line'>    <span class="nv">VIM_INSERT</span><span class="o">=</span><span class="s2">&quot;%K{034}%F{075}⮂%k%f%K{075}%F{026} % INSERT %k%f%K{075}%F{black}⮂%k%f&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="nv">RPS1</span><span class="o">=</span><span class="s2">&quot;$EMACS_INSERT${${KEYMAP/vicmd/$VIM_NORMAL}/(main|viins)/$VIM_INSERT}&quot;</span>
</span><span class='line'><span class="nv">RPS2</span><span class="o">=</span><span class="nv">$RPS1</span>
</span><span class='line'>zle reset-prompt
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>
</span><span class='line'>zle -N airchrome-bindmode-vi&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;emacs モードで Ctrl+v を押すと、 vi モードに切り替わると同時に、プロンプトが設定される&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -e &amp;lsquo;^v&amp;rsquo; airchrome-bindmode-vi&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;デフォルトキーバインドの設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -v&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;bindkey <span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;bindkye <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;Ctrl+e をおした時のプロンプトでの実行&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;bindkey -sv &amp;lsquo;^e&amp;rsquo; &amp;lsquo;bindkey -e<span class="se">\n</span>&amp;rsquo;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;bindkey -se &amp;lsquo;^v&amp;rsquo; &amp;lsquo;bindkey -v<span class="se">\n</span>&amp;rsquo;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">}}}</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;jj を押すと、 vi の normal モードに切り替わる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey -M viins &amp;lsquo;jj&amp;rsquo; vi-cmd-mode&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ヘルプを表示する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;function airchrome-browser-help <span class="o">()</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;<span class="nv">$airchrome_script</span>/airchrome_help.sh
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>
</span><span class='line'>zle -N airchrome-browser-help
</span><span class='line'>bindkey -a &amp;lsquo;?&amp;rsquo; airchrome-browser-help
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>path</h3>

<p>zsh scriptのパスの取得を解説します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;スクリプトに記述した場合、現在、スクリプトがあるディレクトリパスを取得する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dir<span class="o">=</span><span class="k">${</span><span class="nv">0</span><span class="p">:</span><span class="nv">a</span><span class="p">:</span><span class="nv">h</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;現在のディレクトリの一つ上のパスを取得する<span class="o">(</span>上の記述とセットで動作する<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;lhome<span class="o">=</span><span class="k">${</span><span class="nv">dir</span><span class="p">:</span><span class="nv">h</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;dir に依存しない形で取得する場合&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;lhome<span class="o">=</span><span class="k">${</span><span class="nv">0</span><span class="p">:</span><span class="nv">a</span><span class="p">:</span><span class="nv">h</span><span class="p">:</span><span class="nv">h</span><span class="k">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>directory</h3>

<p>私が作るツールのディレクトリ構造を解説します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>.
</span><span class='line'>├── LICENSE <span class="c">#ライセンス:cc0</span>
</span><span class='line'>│
</span><span class='line'>├── README.md <span class="c">#説明書</span>
</span><span class='line'>│
</span><span class='line'>├── airchrome.zsh <span class="c">#本体:ディレクトリ名</span>
</span><span class='line'>│
</span><span class='line'>├── tool <span class="c">#外部ツール、ダウンロードファイル</span>
</span><span class='line'>│
</span><span class='line'>├── script <span class="c">#スクリプト、実行ファイル</span>
</span><span class='line'>│   │  
</span><span class='line'>│   ├── hoge.sh
</span><span class='line'>│   │  
</span><span class='line'>│   └── huga.sh
</span><span class='line'>│
</span><span class='line'>├── t <span class="c">#テスト</span>
</span><span class='line'>│   │  
</span><span class='line'>│   └── test.sh
</span><span class='line'>│ 
</span><span class='line'>└── txt <span class="c">#テキスト、テーマファイルなど&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;│  
</span><span class='line'>└── theme.txt
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>function</h3>

<p>以下は、zshで使える<code>function</code>の一般的な書式です。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;コマンドのまとまりを記述、hogeがコマンド名になる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;function hoge <span class="o">()</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;echo <span class="nb">command</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ラインエディタを有効にする。自分が新しいコマンドを作る場合に必要&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;zle -N hoge&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;キーバインドを設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bindkey &amp;lsquo;^a&amp;rsquo; hoge
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>percol</h3>

<p>percolインターフェイスを使用することが多いです。</p>

<p><a href="http://qiita.com/syui/items/f2fe51d00378210d10b1">percol &ndash; コマンドラインでの選択的インターフェイスについて考える &ndash; Qiita</a></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/airchrome.zsh/script/airchrome_percol.sh </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/zsh&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;テーマファイルを用意し、それを引数にスクリプトを実行する <span class="o">{{{</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;テーマファイルのパスを取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;them<span class="o">=</span><span class="nv">$lhome</span>/txt/theme.txt&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;percolでテーマを選択、取得する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;opt<span class="o">=</span>&lt;code&gt;cat <span class="nv">$them</span> | percol --query<span class="o">=</span><span class="s2">&quot;air-&quot;</span> | cut -d <span class="s2">&quot;:&quot;</span> -f 1&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;スクリプトを文字列に応じて実行します&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;case <span class="nv">$opt</span> in&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;<span class="s2">&quot;air-?&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="nv">$scpt</span>/airchrome_help.sh
</span><span class='line'>    ;;
</span><span class='line'>
</span><span class='line'><span class="s2">&quot;air-ag&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="nv">$scpt</span>/airgoogleplus.sh
</span><span class='line'>    ;;
</span><span class='line'>
</span><span class='line'>*<span class="o">)</span>
</span><span class='line'>    <span class="nb">exit</span>
</span><span class='line'>    ;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;esac
</span><span class='line'><span class="o">}}}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>それに、私は、<code>case</code>文を好んで使います。</p>

<p><code>case</code>は、以下のように正規表現を使って判断もできます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/bash&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;key<span class="o">=</span>&lt;code&gt;read key&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;case <span class="nv">$key</span> in&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  y<span class="o">[</span>Y<span class="o">]</span>es|ok<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;echo yes;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  n<span class="o">[</span>N<span class="o">]</span>o<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;echo no;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  *<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;exit;;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;esac
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>script</h2>

<h3>Shell Script</h3>

<h4>基本的な書き方</h4>

<p>Apple Scriptのコマンドラインでの実行は、<code>osascript</code>コマンドで行います。ただし、引数の処理が面倒なので、ShellScriptで書いています。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>iterm_transparency_03.sh </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/bash&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;osascript &amp;lt;&amp;lt; EOF
</span><span class='line'>tell application &amp;ldquo;iTerm&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;activate
</span><span class='line'>tell current session of current terminal
</span><span class='line'>  <span class="nb">set </span>transparency to <span class="nv">$1</span>
</span><span class='line'>end tell
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;end tell
</span><span class='line'>EOF
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>EOF</code>を使うことで、様々な処理ができます。通常は以下の様に使います。</p>

<p>``` bash EOF
cat &lt;&lt; EOF > ~/test.txt
  echo test
EOF</p>

<p>cat &lt;&lt; EOF | osascript &ndash;
tell application &ldquo;iTerm&rdquo;</p>

<pre><code>activate
tell current session of current terminal
  set transparency to $1
end tell
</code></pre>

<p>end tell
EOF
```</p>

<h4>Google ChromeでFeedlyを開く</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;!/bin/zsh&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ディレクトリパス&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dir<span class="o">=</span><span class="k">${</span><span class="nv">0</span><span class="p">:</span><span class="nv">a</span><span class="p">:</span><span class="nv">h</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;現在、Google Chromeで開いているURLを取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;url<span class="o">=</span>&lt;code&gt;<span class="nv">$dir</span>/browser_get_url.sh&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;URLのトップアドレスを取得 <span class="o">(</span>hoge, <span class="nv">huga</span><span class="o">=</span>&lt;code&gt;command&lt;/code&gt;という書き方もできるかも<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;urltop<span class="o">=</span>&lt;code&gt;echo <span class="nv">$url</span> | cut -d <span class="s2">&quot;/&quot;</span> -f 1-3&lt;/code&gt;
</span><span class='line'><span class="nv">urlhttpno</span><span class="o">=</span>&lt;code&gt;echo <span class="nv">$url</span> | cut -d <span class="s2">&quot;/&quot;</span> -f 3&lt;/code&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;urlhttpno<span class="o">=</span><span class="nv">$urltop</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Feedlyのアドレス&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;urlfeedly<span class="o">=</span>&amp;ldquo;&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://www.feedly.com/home#subscription/feed&quot;</span>&gt;http://www.feedly.com/home#subscription/feed&lt;/a&gt;&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ブログサービスによって処理を変更する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;if <span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep &amp;ldquo;livedoor.jp<span class="se">\|</span>fc2.com<span class="se">\|</span>blogspot.com<span class="se">\|</span>blogspot.jp<span class="se">\|</span>github.io&amp;rdquo; &gt; /dev/null 2&gt;&amp;amp;1 ; <span class="k">then</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;# livedoor
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep <span class="s2">&quot;livedoor.jp&quot;</span> &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/index.rdf&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># fc2</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep <span class="s2">&quot;fc2.com&quot;</span> &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/?xml&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># blogger</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep <span class="s2">&quot;blogspot.com&quot;</span> &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/feeds/posts/default&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep <span class="s2">&quot;blogspot.jp&quot;</span> &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/feeds/posts/default&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># github pages</span>
</span><span class='line'><span class="k">if </span><span class="nb">echo</span> <span class="nv">$urlhttpno</span> | grep <span class="s2">&quot;github.io&quot;</span> &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/atom.xml&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;else&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;# default:+/feed
</span><span class='line'>open -a <span class="s2">&quot;Google Chrome&quot;</span> <span class="s2">&quot;$urlfeedly/$urltop/feed&quot;</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;fi&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;exit
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Apple Script</h3>

<h4>Google Chromeのリロード完了を待つ</h4>

<p>``` bash chrome_reload_done.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;Google Chrome&rdquo;
   repeat while loading of active tab of window 1</p>

<pre><code>    delay 0.1
</code></pre>

<p>   end repeat
   activate
end tell
EOF
```</p>

<h4>Google Chromeの現在開いているタブをリロードする</h4>

<p>``` bash chrome_reload_tab.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;Google Chrome&rdquo;</p>

<pre><code>reload active tab of window 1
</code></pre>

<p>end tell
EOF
```</p>

<h4>Google Chromeで現在開いているタブのURLを取得する</h4>

<p>``` bash chrome_get_url.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;Google Chrome&rdquo; to get URL of active tab of first window
EOF
```</p>

<h4>Google Chromeで現在開いているタブのタイトルを取得する</h4>

<p>``` bash chrome_get_title.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;Google Chrome&rdquo; to get NAME of active tab of first window
EOF
```</p>

<h4>iTermからGoogle Chromeへキーを送る</h4>

<p>``` bash chrome_key_iterm.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;Google Chrome&rdquo;</p>

<pre><code>activate
tell application "System Events"
    delay 0.3
    keystroke "$1"
    tell application "iTerm"
        activate
    end tell
end tell
</code></pre>

<p>end tell
EOF
```</p>

<p><code>keystroke</code>と<code>key code</code>が使えます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>keystroke &amp;ldquo;v&amp;rdquo; using <span class="o">{</span><span class="nb">command </span>down, option down, <span class="nb">shift </span>down<span class="o">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;key code 53 &amp;mdash;esc
</span><span class='line'>key code 51 &amp;mdash;delete
</span><span class='line'>key code 48 &amp;mdash;tab
</span><span class='line'>key code 49 &amp;mdash;space
</span><span class='line'>key code 36 &amp;mdash;return
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>Google Chromeのブックマークを開く</h4>

<p>``` bash chrome_open_bookmark.sh</p>

<h1>!/bin/zsh</h1>

<p>dir=~/Library/Application\ Support/Google/Chrome/Default/Bookmarks</p>

<p>if [ -e $dir ]; then</p>

<pre><code>name=`cat $dir | jq -r '.roots.bookmark_bar.children[].children[].name' | percol`
arg=".roots.bookmark_bar.children[].children[] | select(.name == \"$name\" )"
url=`cat $dir | jq -r $arg | jq -r .url`
open -a Google\ Chrome "$url"
</code></pre>

<p>fi</p>

<p>exit 0
```</p>

<h4>iTermの透過度を設定する</h4>

<p>``` bash iterm_set_transparency.sh</p>

<h1>!/bin/zsh</h1>

<p>osascript &lt;&lt; EOF
tell application &ldquo;iTerm&rdquo;</p>

<pre><code>activate
tell current session of current terminal
  set transparency to $1
end tell
</code></pre>

<p>end tell
EOF
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[WeeChat]]></title>
    <link href="http://syui.github.io/blog/2014/06/06/weechat/"/>
    <updated>2014-06-06T00:00:00+09:00</updated>
    <id>http://syui.github.io/blog/2014/06/06/weechat</id>
    <content type="html"><![CDATA[<p><img src="/images/more.png" alt="phoenix-power" align="left" width="100" height="100">weechatを使ったIRCチャット。<!--more--><br clear="all"></p>

<h2>weechat</h2>

<h3>weechatの初期設定</h3>

<h4>install</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>brew install weechat &amp;mdash;with-ruby &amp;mdash;with-python &amp;mdash;with-perl
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>plugin</h4>

<p>まずは、プラグイン管理します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -o ~/.weechat/python/autoload/weeget.py &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://www.weechat.org/files/scripts/weeget.py&quot;</span>&gt;http://www.weechat.org/files/scripts/weeget.py&lt;/a&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>次に、各種プラグインを以下の<code>weechat</code>コマンドを使ってインストールします。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/weeget install grep.py buffers.pl colorize_nicks.py colorize_lines.pl go.py growl.py
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>あとは、<code>growl.py</code>に必要なツールをインストールします。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo pip install gntp
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>setting</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>weechat-curses&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/help irc.server.freenode.autoconnect&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/weeget install iset.pl&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/iset
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>通常は、以下のように設定します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;サーバー接続&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/connect chat.freenode.net&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/connect freenode&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;サーバー切断&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/disconnect freenode&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;チャンネル接続&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/join <span class="c">#ubuntu&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;チャンネル切断&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/part
</span><span class='line'>/close&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;終了&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/exit
</span><span class='line'>/quit
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>上記は、<code>freenode</code>サーバーに接続した後、<code>archlinux</code>チャンネルを選択しています。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;サーバーの立ち上げ&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/server add example irc.example.com/6667 -ssl -autoconnect&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;設定の保存&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/save
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><a href="http://www.weechat.org/files/doc/devel/weechat_quickstart.ja.html">WeeChat クイックスタートガイド</a></p>

<p><a href="https://wiki.archlinux.org/index.php/WeeChat">WeeChat &ndash; ArchWiki</a></p>

<p><a href="http://qiita.com/taketin@github/items/dd91ba59dceda96c94aa">IRC &ndash; weechat のススメ（導入〜設定） &ndash; Qiita</a></p>

<h3>weechatの使い方</h3>

<h4>keybind</h4>

<table>
<thead>
<tr>
<th></th>
<th>キー</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>Alt+↔</td>
<td>前後のバッファに切り替える</td>
</tr>
<tr>
<td></td>
<td>F5/F6</td>
<td>前後のバッファに切り替える</td>
</tr>
<tr>
<td></td>
<td>F7/F8</td>
<td>前後のウィンドウに切り替える</td>
</tr>
<tr>
<td></td>
<td>F9/F10</td>
<td>タイトルバーをスクロール表示</td>
</tr>
<tr>
<td></td>
<td>F11/F12</td>
<td>ニックネーム一覧をスクロール表示</td>
</tr>
<tr>
<td></td>
<td>Tab</td>
<td>入力バーでシェルと同様のテキスト補完を行う</td>
</tr>
<tr>
<td></td>
<td>PgUp/PgDn</td>
<td>現在のバッファのテキストをスクロール表示</td>
</tr>
<tr>
<td></td>
<td>Alt+a</td>
<td>アクティブなバッファに移動する</td>
</tr>
</tbody>
</table>


<p>キーの割当は、以下のように設定できます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/key <span class="nb">bind</span> <span class="o">(</span>alt-kを押下<span class="o">)</span> <span class="o">(</span>alt-yを押下<span class="o">)</span> /buffer close
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>plugin</h4>

<p>登録されてないプラグインを使う方法です。</p>

<p>例えば、URLを開くプラグインを導入してみましょう。</p>

<p><code>bash weechat-url-hinter.rb
$ curl -o ~/.weechat/ruby/autoload/url_hinter.rb https://raw.githubusercontent.com/tkengo/weechat-url-hinter/master/weechat-url-hinter.rb
</code></p>

<p><a href="https://github.com/tkengo/weechat-url-hinter">https://github.com/tkengo/weechat-url-hinter</a></p>

<h4>tor</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>weechat/tor <a href="http://www.weechat.org/files/doc/stable/weechat_user.ja.html#irc_tor_freenode">http://www.weechat.org/files/doc/stable/weechat_user.ja.html#irc_tor_freenode</a> LINK </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>brew install tor&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/proxy add tor socks5 127.0.0.1 9050&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/server add freenode-tor p4fsi4ockecnea7l.onion&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/set irc.server.freenode-tor.proxy &amp;ldquo;tor&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/set irc.server.freenode-tor.sasl_mechanism dh-blowfish&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/set irc.server.freenode-tor.sasl_username &amp;ldquo;your_nickname&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/set irc.server.freenode-tor.sasl_password &amp;ldquo;your_password&amp;rdquo;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;/connect freenode-tor
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><a href="https://wiki.archlinux.org/index.php/tor">https://wiki.archlinux.org/index.php/tor</a></p>

<p><a href="https://we.riseup.net/archlinux/weechat">https://we.riseup.net/archlinux/weechat</a></p>

<h3>コメント</h3>

<p>英語の勉強を続けるには、やっぱり英語圏の人と友だちになって会話をすることが、一番効果的だと思うので、<code>IRC</code>で話しかけてみようかな&hellip;。</p>
]]></content>
  </entry>
  
</feed>
